<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movio Kreasi - Super Admin Panel</title>
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- GLOBAL RESET & VARIABLES --- */
        :root {
            --primary: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary: #64748b;
            --bg-body: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --sidebar-width: 260px;
            --header-height: 60px;
            --success: #16a34a;
            --danger: #dc2626;
            --warning: #f59e0b;
        }

        * { box-sizing: border-box; }
        
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-body);
            color: var(--text-main);
            min-height: 100vh;
        }

        /* --- LAYOUT --- */
        .sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            background-color: var(--bg-card);
            border-right: 1px solid var(--border);
            position: fixed;
            top: 0;
            left: 0;
            z-index: 50;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            margin-left: var(--sidebar-width);
            padding: 30px;
            min-height: 100vh;
            transition: margin-left 0.3s ease;
            position: relative;
        }

        /* --- SIDEBAR COMPONENTS --- */
        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
        }

        .sidebar-header h2 {
            margin: 0;
            font-size: 1.25rem;
            color: var(--primary);
            font-weight: 700;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 20px 0;
            flex: 1;
        }

        .sidebar-menu li a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 24px;
            text-decoration: none;
            color: var(--secondary);
            font-size: 0.95rem;
            font-weight: 500;
            border-right: 3px solid transparent;
            transition: all 0.2s;
        }

        .sidebar-menu li a:hover, 
        .sidebar-menu li a.active {
            background-color: #eff6ff;
            color: var(--primary);
            border-right: 3px solid var(--primary);
        }

        .icon { font-size: 1.1rem; }

        /* --- COMMON UI ELEMENTS --- */
        .hidden { display: none !important; }
        
        .page-header { margin-bottom: 24px; }
        .page-header h2 { font-size: 24px; font-weight: 700; margin: 0 0 8px 0; color: #0f172a; }
        .subtitle { font-size: 14px; color: var(--text-muted); margin: 0; }

        .card-panel, .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            margin-bottom: 24px;
        }

        .panel-header h3 { margin-top: 0; margin-bottom: 15px; color: var(--text-main); }

        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            font-size: 14px;
            background-color: #fff;
            margin-top: 6px;
        }
        
        .bg-readonly { background-color: #f1f5f9; color: #64748b; cursor: not-allowed; }

        .btn {
            padding: 10px 18px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid transparent;
            transition: all 0.2s;
            display: inline-block;
        }

        .btn-primary { background-color: var(--primary); color: white; }
        .btn-primary:hover { background-color: var(--primary-hover); }
        .btn-secondary { background-color: #e2e8f0; color: #475569; }
        .btn-secondary:hover { background-color: #cbd5e1; }
        .btn-danger { background-color: #fee2e2; color: #dc2626; border-color: #fee2e2; }
        .btn-delete { background-color: #fef2f2; color: #dc2626; border-color: #fee2e2; padding: 6px 12px; font-size: 12px; }
        .btn-delete:hover { background-color: #fee2e2; }
        .btn-view { background-color: #eff6ff; color: #2563eb; border-color: #dbeafe; padding: 6px 12px; font-size: 12px; }
        .btn-view:hover { background-color: #dbeafe; }

        /* --- DASHBOARD SPECIFIC --- */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            text-align: center;
        }
        .stat-title { color: var(--text-muted); font-size: 0.9rem; margin-bottom: 8px; }
        .stat-value { font-size: 2rem; font-weight: 700; color: var(--text-main); }

        /* --- CONTENT SECTION STYLES --- */
        .role-simulator-widget {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: white;
            padding: 8px 16px;
            border-radius: 50px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .role-simulator-widget span { font-size: 12px; font-weight: 600; }
        .role-simulator-widget select { padding: 4px 8px; border-radius: 6px; border: 1px solid var(--border); font-size: 12px; }

        .tabs-container, .tabs-wrapper { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        .content-tab, .integration-tab {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-muted);
            cursor: pointer;
        }
        .content-tab:hover, .integration-tab:hover { background-color: #f1f5f9; }
        .content-tab.active, .integration-tab.active {
            background-color: var(--primary);
            color: white;
        }

        .form-row { display: flex; gap: 20px; }
        .half-width { flex: 1; }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; font-size: 14px; color: var(--secondary); margin-bottom: 4px; }
        .helper-text { font-size: 12px; color: #94a3b8; margin-top: 4px; }
        
        /* --- ACCOUNT SECTION STYLES --- */
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; align-items: end; }
        .full-width-btn { grid-column: 1 / -1; }
        
        .icon-cell { display: flex; align-items: center; gap: 8px; cursor: pointer; }
        .arrow-icon { width: 16px; height: 16px; transition: transform 0.2s; color: var(--secondary); }
        .rotate-90 { transform: rotate(90deg); }
        .user-name { font-weight: 600; color: var(--text-main); }
        
        .nested-wrapper { background-color: #f8fafc; padding: 15px 15px 15px 40px; border-top: 1px solid var(--border); }
        .nested-title { font-size: 11px; font-weight: 700; color: var(--text-muted); margin: 0 0 10px 0; letter-spacing: 0.5px; }
        .nested-table { width: 100%; border-collapse: collapse; }
        .nested-table th { font-size: 12px; text-transform: uppercase; color: var(--text-muted); text-align: left; padding-bottom: 8px; border-bottom: 1px solid var(--border); }
        .nested-table td { padding: 8px 0; font-size: 13px; border-bottom: 1px solid #f1f5f9; }

        /* Badges */
        .badge { padding: 4px 8px; border-radius: 99px; font-size: 11px; font-weight: 600; display: inline-block; }
        .badge-admin { background: #f3e8ff; color: #7e22ce; }
        .badge-member { background: #eff6ff; color: #2563eb; }
        .badge-active { background: #dcfce7; color: #16a34a; }
        .status-text { font-weight: 500; font-size: 13px; }
        .status-text.active { color: #16a34a; }
        .status-text.inactive { color: var(--danger); }
        
        .text-muted { color: var(--text-muted); font-size: 13px; }
        .text-right { text-align: right; }
        .text-danger { color: var(--danger) !important; }
        .text-success { color: #16a34a !important; }

        /* Actions & Pass Edit */
        .action-cell { display: flex; gap: 8px; justify-content: flex-end; align-items: center; }
        .link-btn { background: none; border: none; cursor: pointer; color: var(--primary); font-size: 13px; font-weight: 500; text-decoration: none; padding: 0; }
        .link-btn:hover { text-decoration: underline; }
        
        .edit-pass-container { display: flex; gap: 5px; align-items: center; justify-content: flex-end; }
        .input-mini { padding: 4px 8px; border: 1px solid var(--border); border-radius: 4px; font-size: 12px; width: 100px; }
        .btn-mini { padding: 4px 8px; font-size: 11px; border-radius: 4px; cursor: pointer; border: none; }
        .btn-save { background-color: #16a34a; color: white; }
        .btn-cancel { background-color: transparent; color: var(--secondary); font-size: 14px; }

        /* --- TABLES --- */
        .table-responsive { overflow-x: auto; margin-top: 10px; }
        .data-table { width: 100%; border-collapse: collapse; font-size: 14px; }
        .data-table th { text-align: left; padding: 12px; background: #f8fafc; border-bottom: 2px solid var(--border); color: var(--secondary); font-weight: 600; }
        .data-table td { padding: 12px; border-bottom: 1px solid var(--border); vertical-align: middle; }
        .parent-row { transition: background 0.2s; }
        .parent-row:hover { background-color: #f1f5f9; }
        
        /* --- CHAT SPECIFIC --- */
        .chat-layout { display: flex; flex-direction: column; height: calc(100vh - 100px); background: white; border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
        .chat-header { padding: 15px 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: white; }
        .chat-body { flex: 1; padding: 20px; overflow-y: auto; background: #fafafa; display: flex; flex-direction: column; gap: 10px; }
        .bubble { max-width: 70%; padding: 10px 15px; border-radius: 12px; font-size: 14px; line-height: 1.5; }
        .bubble.sent { align-self: flex-end; background: #dbeafe; color: #1e40af; border-bottom-right-radius: 2px; }
        .bubble.received { align-self: flex-start; background: #f3f4f6; color: #1f2937; border-bottom-left-radius: 2px; }
        .chat-input-area { padding: 15px; border-top: 1px solid var(--border); display: flex; gap: 10px; background: white; }

        /* Chat Dropdown */
        .chat-dropdown { position: relative; }
        .dropdown-menu { display: none; position: absolute; right: 0; top: 110%; background: white; border: 1px solid var(--border); border-radius: 8px; width: 200px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); z-index: 10; }
        .dropdown-menu.show { display: block; }
        .dropdown-item { display: block; padding: 10px 15px; text-decoration: none; color: var(--text-main); font-size: 13px; }
        .dropdown-item:hover { background: #f1f5f9; }

        /* --- PROFILE SPECIFIC --- */
        .profile-layout { display: grid; grid-template-columns: 300px 1fr; gap: 24px; }
        .avatar-wrapper { text-align: center; margin-bottom: 15px; }
        .avatar-img { width: 120px; height: 120px; border-radius: 50%; border: 4px solid #eff6ff; }
        .profile-name { text-align: center; margin: 10px 0; font-size: 1.25rem; }
        .role-badge { text-align: center; font-size: 0.9rem; color: var(--text-muted); margin-bottom: 20px; }
        .info-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9; font-size: 14px; }

        /* Responsive */
        @media (max-width: 900px) { .profile-layout { grid-template-columns: 1fr; } }
        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); transition: transform 0.3s; }
            .sidebar.open { transform: translateX(0); }
            .main-content { margin-left: 0; }
            .form-row { flex-direction: column; gap: 0; }
            .role-simulator-widget { top: auto; bottom: 20px; }
        }
    </style>
</head>
<body>

    <!-- SIDEBAR NAVIGATION -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Movio Kreasi</h2>
        </div>
        <ul class="sidebar-menu">
            <li><a href="#" onclick="showView('dashboard', this)" class="active"><span class="icon">üìä</span> Dashboard</a></li>
            <li><a href="#" onclick="showView('content', this)"><span class="icon">üìù</span> Konten</a></li>
            <li><a href="#" onclick="showView('integration', this)"><span class="icon">üîó</span> Integration</a></li>
            <li><a href="#" onclick="showView('customize', this)"><span class="icon">üé®</span> Kustomisasi</a></li>
            <li><a href="#" onclick="showView('account', this)"><span class="icon">üë•</span> Pengelola Akun</a></li>
            <li><a href="#" onclick="showView('profile', this)"><span class="icon">üë§</span> Profile</a></li>
            <li><a href="#" onclick="showView('chat', this)"><span class="icon">üí¨</span> Chat</a></li>
        </ul>
        <div style="padding: 20px; font-size: 12px; color: #94a3b8; text-align: center;">
            v2.5 Super Admin
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">

        <!-- 1. DASHBOARD VIEW -->
        <section id="view-dashboard" class="view-section">
            <div class="page-header">
                <h2>Dashboard Overview</h2>
                <p class="subtitle">Real-time statistics and overview.</p>
            </div>
            <div id="statsGrid" class="stats-container">
                <!-- Stats injected via JS -->
            </div>
            
            <!-- Quick shortcut to content -->
            <div class="card">
                <h3>Quick Actions</h3>
                <div style="display: flex; gap: 10px;">
                    <button onclick="showView('content', document.querySelector('a[onclick*=\'content\']'))" class="btn btn-primary">Manage Content</button>
                    <button onclick="showView('chat', document.querySelector('a[onclick*=\'chat\']'))" class="btn btn-secondary">Open Chat</button>
                </div>
            </div>
        </section>

        <!-- 2. CONTENT VIEW (UPDATED) -->
        <section id="view-content" class="view-section hidden">
            <!-- Role Simulator Widget (Specific for Content View) -->
            <div class="role-simulator-widget">
                <span>üëÄ View as:</span>
                <select id="roleSimulatorSelect">
                    <option value="admin">Admin Grup</option>
                    <option value="member">Grup Member</option>
                </select>
            </div>

            <div class="page-header">
                <div class="header-title">
                    <h2>Content Management</h2>
                    <p class="subtitle">Manage and create content for the platform.</p>
                </div>
            </div>

            <div class="tabs-container">
                <div class="content-tab active" data-tab="list">Content List</div>
                <div id="createTabContainer" class="content-tab" data-tab="create">Content Creation</div>
            </div>

            <div id="contentTabContent">
                
                <div data-content-tab="list" class="content-panel">
                    <div class="panel-header">
                        <h3>Published Content</h3>
                    </div>
                    
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Target</th>
                                    <th>Date</th>
                                    <th style="width: 150px; text-align: center;">Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr id="row-1" data-content="Ini adalah isi konten lengkap mengenai tata tertib absensi. Harap datang tepat waktu sebelum jam 08.00 WIB.">
                                    <td class="title-cell">Tata Tertib Absensi</td>
                                    <td class="text-muted">Grup Member (Pak Budi)</td>
                                    <td class="text-muted">12 Oct 2023</td>
                                    <td class="action-cell">
                                        <button onclick="viewContent(this)" class="btn btn-view">View</button>
                                        <button onclick="deleteContentRow(this)" class="btn btn-delete">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div data-content-tab="create" class="content-panel hidden">
                    <div class="panel-header">
                        <h3>Buat Konten Baru</h3>
                    </div>

                    <div class="form-wrapper">
                        <div class="form-group">
                            <label>Judul Konten</label>
                            <input id="newContentTitle" class="form-input" placeholder="Contoh: Tata Tertib Absensi" />
                        </div>

                        <div class="form-row">
                            <div class="form-group half-width">
                                <label>Content ini untuk siapa?</label>
                                <select id="targetRoleSelect" class="form-input">
                                    <option value="" disabled selected>-- Pilih Target --</option>
                                    <option value="admin">Hanya Admin Grup</option>
                                    <option value="member">Grup Member</option>
                                </select>
                            </div>

                            <div id="adminDependencyContainer" class="form-group half-width hidden">
                                <label>Pilih Admin Grup Pengelola</label>
                                <select id="parentAdminSelect" class="form-input">
                                    <option value="" disabled selected>-- Pilih Admin --</option>
                                    <option value="budi">Pak Budi (Marketing)</option>
                                    <option value="siti">Bu Siti (Sales)</option>
                                    <option value="joko">Pak Joko (IT)</option>
                                </select>
                                <p class="helper-text">*Aturan ini akan berlaku untuk member di bawah admin ini.</p>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Isi Konten</label>
                            <textarea id="newContentBody" rows="6" class="form-input"></textarea>
                        </div>

                        <div class="form-actions" style="text-align: right;">
                            <button id="publishContentBtn" onclick="publishContentSimulated()" class="btn btn-primary">Publish</button>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- 3. INTEGRATION VIEW -->
        <section id="view-integration" class="view-section hidden">
            <div class="page-header">
                <h2>Integration Center</h2>
                <p class="subtitle">All backend configuration simulated here.</p>
            </div>

            <div class="tabs-wrapper">
                <div class="integration-tab active" data-target="int-api">API Settings</div>
                <div class="integration-tab" data-target="int-users">Users</div>
                <div class="integration-tab" data-target="int-prompt">System Prompt</div>
                <div class="integration-tab" data-target="int-docs">Documents</div>
            </div>

            <div id="integration-content">
                <!-- Tab: API -->
                <div id="int-api" class="integration-pane card-panel">
                    <h3>API Configuration</h3>
                    <p class="subtitle" style="margin-bottom:15px;">Dummy values ‚Äî not used for any real request.</p>
                    <div style="margin-bottom:15px;">
                        <label>API Key</label>
                        <input class="form-input bg-readonly" value="DUMMY-1234-5678-ABCD" readonly />
                    </div>
                    <div>
                        <label>Endpoint (n8n)</label>
                        <input class="form-input bg-readonly" value="https://n8n.dummy.movio.id/webhook/test-endpoint" readonly />
                    </div>
                </div>

                <!-- Tab: Users -->
                <div id="int-users" class="integration-pane card-panel hidden">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                        <h3>User Management</h3>
                        <button onclick="openUserModal()" class="btn btn-primary">+ Add User</button>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead><tr><th>Name</th><th>Email</th><th>Role</th></tr></thead>
                            <tbody id="usersTbody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab: Prompt -->
                <div id="int-prompt" class="integration-pane card-panel hidden">
                    <h3>System Prompt</h3>
                    <textarea id="promptArea" rows="8" class="form-input"></textarea>
                    <div style="margin-top:15px;">
                        <button onclick="savePrompt()" class="btn btn-primary">üíæ Save Prompt</button>
                    </div>
                </div>

                <!-- Tab: Docs -->
                <div id="int-docs" class="integration-pane card-panel hidden">
                    <h3>Documents</h3>
                    <div style="background:#f1f5f9; padding:15px; border-radius:8px; margin-top:10px;">
                        <div style="padding:8px 0; border-bottom:1px solid #cbd5e1;">üìÑ monthly-report.pdf</div>
                        <div style="padding:8px 0;">üìÑ user-guide.docx</div>
                    </div>
                    <button class="btn btn-secondary" style="margin-top:15px;">Upload (Disabled)</button>
                </div>
            </div>
        </section>

        <!-- 4. CUSTOMIZE VIEW -->
        <section id="view-customize" class="view-section hidden">
            <div class="page-header">
                <h2>Customize Design</h2>
                <p class="subtitle">Simulated theme and logo options.</p>
            </div>
            <div class="card-panel">
                <div style="margin-bottom:20px;">
                    <label style="display:block; margin-bottom:8px;">Theme Color</label>
                    <input type="color" value="#2563eb" disabled style="width:60px; height:40px; border:none; padding:0;" />
                </div>
                <div>
                    <label style="display:block; margin-bottom:8px;">Logo URL</label>
                    <input class="form-input bg-readonly" value="https://dummy.logo/dummy.png" readonly />
                </div>
            </div>
        </section>

        <!-- 5. ACCOUNT VIEW (UPDATED) -->
        <section id="view-account" class="view-section hidden">
            <div class="page-header">
                <h2>Manajemen Akun Pengguna</h2>
                <p class="subtitle">Panel Super Admin untuk membuat, mengelola, dan menangguhkan akses pengguna.</p>
            </div>

            <div class="card-panel">
                <h3>Buat Akun Baru</h3>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nama Lengkap</label>
                        <input type="text" class="form-input" placeholder="cth. Budi Santoso" />
                    </div>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" class="form-input" placeholder="cth. budi_santoso" />
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
                    </div>
                    
                    <div class="form-group">
                        <label>Hak Akses (Role)</label>
                        <select id="roleSelect" class="form-input">
                            <option value="staff" selected>Anggota Grup</option>
                            <option value="admin">Admin Grup</option>
                        </select>
                    </div>

                    <div id="adminSelectContainer" class="form-group">
                        <label>Pilih Admin Grup (Atasan)</label>
                        <select id="adminSelect" class="form-input">
                            <option value="" disabled selected>-- Pilih Admin --</option>
                            <option value="admin1">Pak Budi (Marketing)</option>
                            <option value="admin2">Bu Siti (Sales)</option>
                        </select>
                    </div>

                    <div id="groupNameContainer" class="form-group hidden">
                        <label>Nama Grup Baru</label>
                        <input type="text" class="form-input" placeholder="cth. Tim Marketing" />
                    </div>

                    <div class="form-group full-width-btn">
                        <button class="btn btn-primary" style="width: 100%;">+ Buat Akun</button>
                    </div>
                </div>
            </div>

            <div class="card-panel">
                <h3>Struktur Grup (Admin & Anggota)</h3>
                
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nama Admin Grup</th>
                                <th>Nama Grup</th>
                                <th>Peran</th>
                                <th>Total Anggota</th>
                                <th>Status</th>
                                <th class="text-right">Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                            <tr class="parent-row" onclick="toggleGroup('group-budi', 'icon-budi')">
                                <td class="icon-cell">
                                    <svg id="icon-budi" class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                                    <span class="user-name">Pak Budi</span>
                                </td>
                                <td>Tim Marketing</td>
                                <td><span class="badge badge-admin">Admin Grup</span></td>
                                <td class="text-muted">1 Anggota</td>
                                <td><span class="badge badge-active">Aktif</span></td>
                                <td class="text-right action-cell">
                                    <div id="actions-view-budi">
                                        <button onclick="togglePassInput('budi', event)" class="link-btn">Ubah Pass</button>
                                    </div>
                                    <div id="pass-edit-budi" class="edit-pass-container hidden">
                                        <input type="password" class="input-mini" placeholder="Pass Baru" onclick="event.stopPropagation()">
                                        <button onclick="savePass('budi', event)" class="btn-mini btn-save">Simpan</button>
                                        <button onclick="togglePassInput('budi', event)" class="btn-mini btn-cancel">‚úï</button>
                                    </div>
                                </td>
                            </tr>

                            <tr id="group-budi" class="child-row hidden">
                                <td colspan="6">
                                    <div class="nested-wrapper">
                                        <p class="nested-title">ANGGOTA GRUP MARKETING:</p>
                                        <table class="nested-table">
                                            <thead>
                                                <tr>
                                                    <th>Username Anggota</th>
                                                    <th>Peran</th>
                                                    <th>Status</th>
                                                    <th class="text-right">Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="user-name">Andi Staff</td>
                                                    <td><span class="badge badge-member">Grup Member</span></td>
                                                    <td><span class="status-text active">‚óè Aktif</span></td>
                                                    <td class="text-right action-cell">
                                                        <div id="actions-view-andi" class="flex-end">
                                                            <button onclick="togglePassInput('andi', event)" class="link-btn">Ubah Pass</button>
                                                            <button class="link-btn text-danger">Nonaktifkan</button>
                                                        </div>
                                                        <div id="pass-edit-andi" class="edit-pass-container hidden">
                                                            <input type="password" class="input-mini" placeholder="Pass Baru">
                                                            <button onclick="savePass('andi', event)" class="btn-mini btn-save">Simpan</button>
                                                            <button onclick="togglePassInput('andi', event)" class="btn-mini btn-cancel">‚úï</button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>

                            <tr class="parent-row" onclick="toggleGroup('group-siti', 'icon-siti')">
                                <td class="icon-cell">
                                    <svg id="icon-siti" class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                                    <span class="user-name">Bu Siti</span>
                                </td>
                                <td>Tim Sales</td>
                                <td><span class="badge badge-admin">Admin Grup</span></td>
                                <td class="text-muted">1 Anggota</td>
                                <td><span class="badge badge-active">Aktif</span></td>
                                <td class="text-right action-cell">
                                    <div id="actions-view-siti">
                                        <button onclick="togglePassInput('siti', event)" class="link-btn">Ubah Pass</button>
                                    </div>
                                    <div id="pass-edit-siti" class="edit-pass-container hidden">
                                        <input type="password" class="input-mini" placeholder="Pass Baru" onclick="event.stopPropagation()">
                                        <button onclick="savePass('siti', event)" class="btn-mini btn-save">Simpan</button>
                                        <button onclick="togglePassInput('siti', event)" class="btn-mini btn-cancel">‚úï</button>
                                    </div>
                                </td>
                            </tr>

                            <tr id="group-siti" class="child-row hidden">
                                <td colspan="6">
                                    <div class="nested-wrapper">
                                        <p class="nested-title">ANGGOTA GRUP SALES:</p>
                                        <table class="nested-table">
                                            <thead>
                                                <tr>
                                                    <th>Username Anggota</th>
                                                    <th>Peran</th>
                                                    <th>Status</th>
                                                    <th class="text-right">Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="user-name">Doni Sales</td>
                                                    <td><span class="badge badge-member">Grup Member</span></td>
                                                    <td><span class="status-text inactive">‚óè Tidak Aktif</span></td>
                                                    <td class="text-right action-cell">
                                                        <div id="actions-view-doni" class="flex-end">
                                                            <button onclick="togglePassInput('doni', event)" class="link-btn">Ubah Pass</button>
                                                            <button class="link-btn text-success">Aktifkan</button>
                                                        </div>
                                                        <div id="pass-edit-doni" class="edit-pass-container hidden">
                                                            <input type="password" class="input-mini" placeholder="Pass Baru">
                                                            <button onclick="savePass('doni', event)" class="btn-mini btn-save">Simpan</button>
                                                            <button onclick="togglePassInput('doni', event)" class="btn-mini btn-cancel">‚úï</button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 6. PROFILE VIEW -->
        <section id="view-profile" class="view-section hidden">
            <div class="page-header">
                <h2>Profil Pengelola</h2>
                <p class="subtitle">Informasi akun Admin dan identitas Grup Anda.</p>
            </div>

            <div class="profile-layout">
                <div class="card profile-card">
                    <div class="avatar-wrapper">
                        <img src="https://ui-avatars.com/api/?name=Pak+Budi&background=2563eb&color=fff&size=128" alt="Profile" class="avatar-img">
                    </div>
                    <h3 class="profile-name">Pak Budi</h3>
                    <div class="role-badge">
                        Admin: <span style="color:var(--primary); font-weight:600;">Marketing Team</span>
                    </div>
                    <div style="margin-top:20px;">
                        <div class="info-row">
                            <span class="label">ID Akun</span>
                            <span class="value">ADM-8821</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Status</span>
                            <span class="status-active">‚óè Aktif</span>
                        </div>
                    </div>
                </div>

                <div class="card form-card">
                    <div style="margin-bottom:20px; border-bottom:1px solid var(--border); padding-bottom:10px;">
                        <h3>Edit Informasi</h3>
                    </div>
                    <form onsubmit="saveProfile(event)">
                        <div class="form-group" style="margin-bottom:15px;">
                            <label style="font-size:14px;">Nama Lengkap Admin</label>
                            <input type="text" value="Pak Budi Santoso" class="form-input">
                        </div>
                        <div class="form-group" style="margin-bottom:20px;">
                            <label style="font-size:14px;">Nama Grup / Divisi</label>
                            <input type="text" value="Marketing Team" class="form-input">
                            <p style="font-size:12px; color:#94a3b8; margin-top:4px;">*Nama ini akan terlihat oleh member Anda.</p>
                        </div>
                        <div style="text-align:right;">
                            <button type="submit" class="btn btn-primary">Simpan Perubahan</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- 7. CHAT VIEW -->
        <section id="view-chat" class="view-section hidden">
            <div class="chat-layout">
                <header class="chat-header">
                    <div>
                        <div id="chatTitle" style="font-weight:700; font-size: 1.1rem; color: #111827;">Chat with Bu Lina</div>
                        <div style="font-size:12px; color:var(--text-muted);">AI Assistant ‚Ä¢ Online</div>
                    </div>
                    <div class="chat-dropdown">
                        <button onclick="toggleChatMenu()" class="btn btn-secondary">
                            üí¨ Ganti Kontak ‚ñæ
                        </button>
                        <div id="chatSubmenu" class="dropdown-menu">
                            <a href="#" class="dropdown-item" onclick="switchChat('Bu Lina')">Chat With Bu Lina</a>
                            <a href="#" class="dropdown-item" onclick="switchChat('Ustadzah AI')">Chat With Ustadzah AI</a>
                            <a href="#" class="dropdown-item" onclick="switchChat('Helpdesk')">Chat With Helpdesk</a>
                        </div>
                    </div>
                </header>

                <div id="chatBody" class="chat-body">
                    <div class="bubble received">Halo! Saya Bu Lina. Ada yang bisa saya bantu terkait pelajaran hari ini? üëã</div>
                </div>

                <div class="chat-input-area">
                    <input id="chatInput" class="form-input" style="margin-top:0;" placeholder="Ketik pesan Anda..." />
                    <button onclick="sendChatMessage()" class="btn btn-primary">Kirim</button>
                </div>
            </div>
        </section>

    </main>

    <!-- JS LOGIC -->
    <script>
        // --- DATA DUMMY ---
        const statsData = [
            {title:'Total Users', value:'32'},
            {title:'Chat Sessions', value:'145'},
            {title:'Integrations', value:'5'},
            {title:'Documents', value:'12'}
        ];

        const usersData = [
            {name:'Amanda Atika', email:'amanda@example.com', role:'Admin'},
            {name:'Bu Lina', email:'lina@teacherai.id', role:'AI Agent'}
        ];

        let currentPrompt = "You are Bu Lina, an AI teacher for 3rd grade elementary school math.";

        // --- GLOBAL NAVIGATION ---
        function showView(viewId, element) {
            // Hide all views
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            
            // Show target view
            const target = document.getElementById('view-' + viewId);
            if(target) target.classList.remove('hidden');

            // Toggle Role Simulator Widget (Only show in Content view)
            const roleWidget = document.querySelector('.role-simulator-widget');
            if(roleWidget) {
                if(viewId === 'content') roleWidget.style.display = 'flex';
                else roleWidget.style.display = 'none';
            }

            // Update Sidebar Active State
            if(element) {
                document.querySelectorAll('.sidebar-menu a').forEach(el => el.classList.remove('active'));
                element.classList.add('active');
            }
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Render Stats
            const statsGrid = document.getElementById('statsGrid');
            statsData.forEach(s => {
                statsGrid.innerHTML += `
                    <div class="stat-card">
                        <div class="stat-title">${s.title}</div>
                        <div class="stat-value">${s.value}</div>
                    </div>`;
            });

            // Render Users Table for Integration
            renderUsers();

            // Set Prompt Value
            document.getElementById('promptArea').value = currentPrompt;

            // Setup Content Tabs
            setupContentTabs();
            
            // Setup Integration Tabs
            setupIntegrationTabs();

            // Setup Account Role Toggle
            setupAccountRoleToggle();

            // Init Role Simulator Logic
            setupRoleSimulator();
        });

        // --- CONTENT SECTION LOGIC ---
        function setupContentTabs() {
            const tabs = document.querySelectorAll('.content-tab');
            const contents = document.querySelectorAll('[data-content-tab]');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    if(tab.style.display === 'none') return;
                    
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    const target = tab.getAttribute('data-tab');
                    contents.forEach(c => c.classList.add('hidden'));
                    document.querySelector(`[data-content-tab="${target}"]`).classList.remove('hidden');
                });
            });

            // Target Role Logic
            const targetSelect = document.getElementById('targetRoleSelect');
            const adminContainer = document.getElementById('adminDependencyContainer');
            const adminSelect = document.getElementById('parentAdminSelect');

            if (targetSelect && adminContainer) {
                targetSelect.addEventListener('change', function() {
                    if (this.value === 'member') {
                        adminContainer.classList.remove('hidden');
                        adminSelect.value = ""; 
                    } else {
                        adminContainer.classList.add('hidden');
                    }
                });
            }
        }

        function setupRoleSimulator() {
            const roleSelect = document.getElementById('roleSimulatorSelect');
            const createTab = document.getElementById('createTabContainer');
            
            if(roleSelect) {
                roleSelect.addEventListener('change', (e) => {
                    const role = e.target.value;
                    if(role === 'admin') {
                        createTab.style.display = 'block';
                    } else {
                        createTab.style.display = 'none';
                        document.querySelector('[data-tab="list"]').click(); // Go to list
                    }
                });
                roleSelect.dispatchEvent(new Event('change'));
            }
        }

        function publishContentSimulated() {
            const title = document.getElementById('newContentTitle').value;
            const body = document.getElementById('newContentBody').value;
            if(!title) return Swal.fire('Error', 'Judul harus diisi', 'error');
            
            Swal.fire('Berhasil', 'Konten diterbitkan!', 'success');
            document.getElementById('newContentTitle').value = '';
            document.getElementById('newContentBody').value = '';
            document.querySelector('[data-tab="list"]').click();
        }

        function viewContent(button) {
            const row = button.closest('tr');
            const title = row.querySelector('.title-cell').innerText;
            const body = row.getAttribute('data-content') || "";
            
            Swal.fire({
                title: 'Detail Konten',
                html: `<div style="text-align:left"><label style="font-weight:bold; font-size:12px;">Judul</label><input class="form-input" value="${title}" disabled><br><br><label style="font-weight:bold; font-size:12px;">Isi</label><textarea class="form-input" rows="5" disabled>${body}</textarea></div>`,
                showDenyButton: true, showConfirmButton: false, denyButtonText: 'Edit', denyButtonColor: '#f59e0b', showCloseButton: true
            }).then((res) => {
                if(res.isDenied) editContent(row, title, body);
            });
        }

        function editContent(row, title, body) {
            Swal.fire({
                title: 'Edit Konten',
                html: `<div style="text-align:left"><label style="font-size:12px;">Judul</label><input id="edit-title" class="form-input" value="${title}"><br><br><label style="font-size:12px;">Isi</label><textarea id="edit-body" class="form-input" rows="5">${body}</textarea></div>`,
                showCancelButton: true, confirmButtonText: 'Simpan',
                preConfirm: () => {
                    const t = document.getElementById('edit-title').value;
                    const b = document.getElementById('edit-body').value;
                    if(!t || !b) Swal.showValidationMessage('Harus diisi!');
                    return {t, b};
                }
            }).then((res) => {
                if(res.isConfirmed) {
                    row.querySelector('.title-cell').innerText = res.value.t;
                    row.setAttribute('data-content', res.value.b);
                    Swal.fire('Berhasil', 'Konten diupdate', 'success');
                }
            });
        }

        function deleteContentRow(button) {
            Swal.fire({ title:'Hapus?', text:'Tidak bisa dikembalikan', icon:'warning', showCancelButton:true, confirmButtonText:'Ya, hapus' })
            .then((res) => { if(res.isConfirmed) { button.closest('tr').remove(); Swal.fire('Terhapus', '', 'success'); } });
        }

        // --- INTEGRATION SECTION LOGIC ---
        function setupIntegrationTabs() {
            const tabs = document.querySelectorAll('.integration-tab');
            const panes = document.querySelectorAll('.integration-pane');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    panes.forEach(p => p.classList.add('hidden'));
                    const targetId = tab.getAttribute('data-target');
                    document.getElementById(targetId).classList.remove('hidden');
                });
            });
        }

        function renderUsers() {
            const tbody = document.getElementById('usersTbody');
            tbody.innerHTML = '';
            usersData.forEach(u => {
                tbody.innerHTML += `<tr><td>${u.name}</td><td>${u.email}</td><td>${u.role}</td></tr>`;
            });
        }

        function openUserModal() {
            Swal.fire({
                title: 'Add Dummy User',
                html: `<input id="swal-name" class="swal2-input" placeholder="Name"><input id="swal-email" class="swal2-input" placeholder="Email"><input id="swal-role" class="swal2-input" placeholder="Role">`,
                preConfirm: () => {
                    return { name: document.getElementById('swal-name').value, email: document.getElementById('swal-email').value, role: document.getElementById('swal-role').value }
                }
            }).then((result) => {
                if(result.isConfirmed) {
                    usersData.push(result.value);
                    renderUsers();
                    Swal.fire('Saved', '', 'success');
                }
            });
        }

        function savePrompt() {
            currentPrompt = document.getElementById('promptArea').value;
            Swal.fire('Saved', 'System prompt updated locally', 'success');
        }

        // --- ACCOUNT SECTION LOGIC ---
        function setupAccountRoleToggle() {
            const roleSelect = document.getElementById('roleSelect');
            const adminContainer = document.getElementById('adminSelectContainer');
            const groupContainer = document.getElementById('groupNameContainer');
            const adminSelect = document.getElementById('adminSelect');

            function toggle() {
                if (roleSelect.value === 'admin') {
                    adminContainer.classList.add('hidden');
                    groupContainer.classList.remove('hidden');
                    adminSelect.value = ""; 
                } else {
                    adminContainer.classList.remove('hidden');
                    groupContainer.classList.add('hidden');
                }
            }
            if(roleSelect) {
                roleSelect.addEventListener('change', toggle);
                toggle(); // init
            }
        }

        function toggleGroup(rowId, iconId) {
            const row = document.getElementById(rowId);
            const icon = document.getElementById(iconId);
            if (row.classList.contains('hidden')) {
                row.classList.remove('hidden');
                icon.classList.add('rotate-90');
            } else {
                row.classList.add('hidden');
                icon.classList.remove('rotate-90');
            }
        }

        function togglePassInput(userId, event) {
            event.stopPropagation();
            const viewDiv = document.getElementById('actions-view-' + userId);
            const editDiv = document.getElementById('pass-edit-' + userId);
            if (editDiv.classList.contains('hidden')) {
                editDiv.classList.remove('hidden');
                viewDiv.classList.add('hidden');
            } else {
                editDiv.classList.add('hidden');
                viewDiv.classList.remove('hidden');
            }
        }

        function savePass(userId, event) {
            event.stopPropagation();
            alert('Password untuk pengguna ' + userId + ' berhasil diperbarui!');
            togglePassInput(userId, event);
        }

        // --- PROFILE ACTIONS ---
        function saveProfile(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "Saving...";
            btn.disabled = true;
            setTimeout(() => {
                Swal.fire('Success', 'Profile updated successfully!', 'success');
                btn.innerText = originalText;
                btn.disabled = false;
            }, 1000);
        }

        // --- CHAT LOGIC ---
        function toggleChatMenu() {
            document.getElementById('chatSubmenu').classList.toggle('show');
        }
        window.onclick = function(event) {
            if (!event.target.matches('.btn-secondary')) {
                const dropdowns = document.getElementsByClassName("dropdown-menu");
                for (let i = 0; i < dropdowns.length; i++) {
                    const open = dropdowns[i];
                    if (open.classList.contains('show')) open.classList.remove('show');
                }
            }
        }
        function switchChat(name) {
            document.getElementById('chatTitle').innerText = "Chat with " + name;
            const chatBody = document.getElementById('chatBody');
            chatBody.innerHTML = ''; 
            let greeting = "Hello!";
            if(name.includes('Bu Lina')) greeting = "Halo! Saya Bu Lina. Ada yang bisa saya bantu?";
            else if(name.includes('Ustadzah')) greeting = "Assalamualaikum. Saya Ustadzah Laila, mari belajar.";
            else greeting = "Helpdesk di sini. Ada kendala teknis?";
            chatBody.innerHTML = `<div class="bubble received">${greeting}</div>`;
        }
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const text = input.value.trim();
            if(!text) return;
            const chatBody = document.getElementById('chatBody');
            chatBody.innerHTML += `<div class="bubble sent">${text}</div>`;
            input.value = '';
            chatBody.scrollTop = chatBody.scrollHeight;
            setTimeout(() => {
                chatBody.innerHTML += `<div class="bubble received">Terima kasih! Pesan Anda sudah diterima. (Dummy Reply)</div>`;
                chatBody.scrollTop = chatBody.scrollHeight;
            }, 1000);
        }
        document.getElementById('chatInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') sendChatMessage();
        });
    </script>
</body>
</html>